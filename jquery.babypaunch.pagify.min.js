$.fn.pagify=function(settings){var defaults={current:1,total:0,pager:10,textType:true,combo:[10,20,30,50],list:20,showCombo:true,showPrevNext:true,showFirstEnd:true,attr:"index",first:function(min){return{[this.attr]:min-1,"text":min};},prev:function(num,min){var _prev=(num-1)*this.pager-this.pager+1;return _prev<min?{[this.attr]:min-1,"text":min}:{[this.attr]:_prev-1,"text":_prev};},from:function(num){return num===1?1:num*this.pager-this.pager+1;},to:function(num){return num===1?this.pager:num*this.pager;},next:function(num,max){var _next=num*this.pager+1;return _next>max?{[this.attr]:max-1,"text":max}:{[this.attr]:_next-1,"text":_next};},end:function(max){return{[this.attr]:max-1,"text":max};},ui:{style:function(idx){var _style="text-decoration: none; font-size: 1em; pointer: cursor;";switch(idx){case 0:_style+=" color: silver; padding: 0.3em;"
break;case 1:_style+=" color: gray; padding: 0.3em; font-weight: bold;"
break;default:_style+=" color: gray; font-weight: bold;"
break;}
return" style='"+_style+"'";},nav:function(type,num,text){var _type="";switch(type){case"first":_type="≪";break;case"prev":_type="＜";break;case"next":_type="＞";break;case"end":_type="≫";break;}
return"<a href='#' data-"+defaults.attr+"='"+num+"'"+this.style()+"> "+_type+" </a>\n";},pager:function(num,text,isCurrent,type,listed){var result="";if(type===0){result="<a href='#' data-"+defaults.attr+"='"+num+"'"+this.style(isCurrent?1:0)+">"+text+"</a>\n";}else{result="<input type='number' min='1' max='"+listed+"' data-"+defaults.attr+"='"+num+"' value='"+text+"' style='font-size: 1em; width: 60px; text-align: right;'/>\n";}
return result;}}}
$.extend(true,defaults,settings);var listed=Math.ceil(defaults.total/defaults.list);var paged=Math.ceil(listed/defaults.pager);var result={};for(var i=0;i<=paged;i++){var fromTo=[];var inPaged=false;for(var j=defaults.from(i),num=j-1;j<=defaults.to(i);j++,num++){if(j<=listed){if(j===defaults.current){inPaged=true;}
fromTo.push({[defaults.attr]:num,"text":j,"isCurrent":j===defaults.current});}}
if(inPaged){if(defaults.showFirstEnd&&paged>1&&defaults.current!==1){result.first=defaults.first(1);}
if(defaults.showPrevNext&&defaults.current>defaults.pager){result.prev=defaults.prev(i,1);}
result.fromTo=fromTo;if(defaults.showPrevNext&&defaults.next(i,listed).text<defaults.end(listed).text){result.next=defaults.next(i,listed);}
if(defaults.showFirstEnd&&paged>1&&defaults.current!==listed){result.end=defaults.end(listed);}}}
return this.each(function(){var tags="";var _ui=defaults.ui;for(var i in result){var _result=result[i];if(i==="fromTo"){for(var j=0;j<_result.length;j++){if(defaults.textType){tags+=_ui.pager(_result[j][defaults.attr],_result[j].text,_result[j].isCurrent,0);}else{if(_result[j].isCurrent){tags+=_ui.pager(_result[j][defaults.attr],_result[j].text,_result[j].isCurrent,1,listed);}}}}else{tags+=_ui.nav(i,_result[defaults.attr],_result.text);}}
if(defaults.showCombo){tags+="<select style='font-size: 1em;'>\n";for(var i=0,combo=defaults.combo;i<combo.length;i++){tags+="\t<option value='"+combo[i]+"'"+(defaults.list===combo[i]?" selected='selected'":"")+">"
+combo[i]
+"</option>\n";}
tags+="</select>\n";}
$(this).html(tags);});}
